<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/github-markdown-css/2.10.0/github-markdown.css">
	<script src="https://cdn.bootcss.com/axios/0.18.0/axios.min.js"></script>
	<script src="https://cdn.bootcss.com/marked/0.4.0/marked.min.js"></script>
	<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdn.bootcss.com/vue/2.6.10/vue.min.js"></script>
	<link rel="stylesheet" type="text/css" href="src/css/style.css">
	<script>
		// PC端 移动端 跳转
		var is_mobi = navigator.userAgent.toLowerCase().match(/(ipod|iphone|android|coolpad|mmp|smartphone|midp|wap|xoom|symbian|j2me|blackberry|wince)/i) != null;
		if (is_mobi) {
			window.location.href = "mobile.html";
		}
	</script>
	<title>小破站</title>
</head>
<body>
	<div class="top">
		<div class="pageTitle">星际漫游者</div>
	</div>
	<div id="app" class="content">
		<div class="left cl">
			<div><b class=item-cell>{{player.name}}</b></div>
			<div class="ship-info">
				<div class=item-cell>
					<span @mouseenter="onmouseover('ship',$event,0)" @mouseleave="onmouseleave('ship',$event)">
						<b>{{playerShip.name}}</b>[ 结构:{{playerShip.structure}}/{{playerShip.maxStrc}} , 护盾:{{playerShip.shield}}/{{playerShip.maxShld}} ]
					</span>
					<a v-if="shipInfo==false" class="fl-right" @click="switchMainShipInfo">▽展开</a>
					<a v-if="shipInfo==true" class="fl-right" @click="switchMainShipInfo">△收起</a>
				</div>
			</div>
			<div class="ship-info" v-if="shipInfo==true">
				武器组
				<div v-for="wp in playerShip.wp" class="item-cell">
					<span class="halfWidth pad-left fl-left" @mouseenter="onmouseover('wp',$event,wp.idx)" @mouseleave="onmouseleave('wp',$event)">武器{{wp.idx}}：{{wp.name}}
						<span v-if="playerShip.wp[wp.idx-1].staff!=-1">({{player.staff[playerShip.wp[wp.idx-1].staff].name}})</span>
					</span>
					<a v-if="wp.id!=-1" class="fl-right" @click="unloadWp(wp.idx)">[卸载]</a>
					<a v-if="playerShip.wp[wp.idx-1].staff==-1&&player.validStaff>0" class="fl-right" @click="assign('wp',wp.idx-1)" title="安排一位宇航员来操作这个武器">[指派]</a>
				</div>
				模块
				<div v-for="md in playerShip.md" class=item-cell>
					<span class="halfWidth pad-left fl-left" @mouseenter="onmouseover('md',$event,md.idx)" @mouseleave="onmouseleave('md',$event)">模块{{md.idx}}：{{md.name}}
					</span>
					<a v-if="md.id!=-1" class="fl-right" @click="unloadMd(md.idx)" title="卸载这个模块">[卸载]</a>
				</div>
			</div>
			<br>
			<br>
			<div class="ship-info">
				<div class=item-cell>
					<span>宇航员({{player.staffNum}}/{{player.maxStaff}})</span>
					<a v-if="staffInfo==false" class="fl-right" @click="switchStaffInfo">▽展开</a>
					<a v-if="staffInfo==true" class="fl-right" @click="switchStaffInfo">△收起</a>
				</div>
				<div v-if="staffInfo==true">
					<div class="item-cell" v-for="staff in player.staff" v-if="staff.id!=-1">
						<span class="halfWidth fl-left" @mouseenter="onmouseover('staff',$event,staff.idx)" @mouseleave="onmouseleave('staff',$event)">
							{{staff.name}}<span v-if="staff.jobType!=-1">（{{jobDesc(staff.idx)}}）</span>
						</span>
						<a v-if="staff.jobType!=-1" class="fl-right" @click="deAssign(staff.idx)" title="取消指派">[调回]</a>
					</div>
				</div>
			</div>
			<br>
			<br>
			<div class="ship-info">
				货柜仓（{{playerShip.roomOccupy}}/{{playerShip.roomSize}}）
			</div>
			<div class="ship-info">
				<div v-for="item in playerShip.room" v-if="item!=undefined&&item.id>=0">
					<div class=item-cell>
						<span class="halfWidth fl-left" @mouseenter="onmouseover('item',$event,item.idx)" @mouseleave="onmouseleave('item',$event)">
							{{item.name}}({{item.num}})
						</span>
						<a v-if="itemData[item.id].type==1" class="fl-right" @click="tryToLoadWp(item.idx)" title="安装这个武器">[装载]</a>
						<a v-if="itemData[item.id].type==2" class="fl-right" @click="tryToLoadMd(item.idx)" title="安装这个模块">[装载]</a>
					</div>
				</div>
			</div>
		</div>
		<div class="mid cl">
			<div>
				<a v-for="(v,index) in midModule" :class="minNavClass(index)" @click="minNavClick(index)">{{v.name}}</a>
			</div>
			<div class="box">
				<div v-if="midModuleCur=='test'">
					<button @click="fight">战斗</button>
					<button @click="testAddStaff">添加船员</button>
					<button @click="testAddHour">增加时间</button>
				</div>
			</div>
		</div>
		<div class="right cl">
			<div>{{timeS()}}</div>
			<a :class="{underline:rightSel==1}" @click="clickRightMenu(1)">船长日志</a>|<a :class="{underline:rightSel==2}" @click="clickRightMenu(2)">查看战斗记录</a>
			<br><br>
			<hr>
			<br>
			<div id="info" class="info" v-if="rightSel==1">
				<div class="info-cell" v-for="item in msg" v-html="item">&emsp;{{item}}</div>
			</div>
			<div id="info" class="info" v-if="rightSel==2">
				<div class="info-cell" v-for="item in ftMsg" v-html="item">&emsp;{{item}}</div>
			</div>
		</div>
		<div class="modal" v-show="modal">
			<div class="assign-div topPad leftVoid" id="assign-div" v-if="assignDiv">
				<div class="bottomad bottomLine">可指派的宇航员({{player.validStaff}})</div>
				<div class="topPad" v-if="player.validStaff==0">没有人可以指派</div>
				<div class="topPad bottomad y-scroll assignPad">
					<div v-for="staff in player.staff" v-if="staff.id!=-1&&staff.jobType==-1">
						<div>
							<span class="halfWidth line fl-left" @mouseenter="onmouseover('staff',$event,staff.idx)" @mouseleave="onmouseleave('staff',$event)">
							{{staff.name}}
							</span>
							<a class="fl-right" @click="assignStaff(staff.idx)" title="指派该宇航员">[指派]</a>
						</div>
					</div>
				</div>
				<div class="topine topPad-big bottomad widthFull"><button class="center" @click="closeAssign">关闭</button></div>
			</div>
		</div>
		<div class="shipTip topPad leftVoid" id="staffTip" v-show="staffTip">
			<div v-if="staffTip">
				<div class="bottomLine bottomad">
					<div><b>{{player.staff[staffTipIdx].name}}</b></div>
					<span>
						{{SPECIES[player.staff[staffTipIdx].species]}}，
						{{CAREER[player.staff[staffTipIdx].career]}}，
						{{GENDER[player.staff[staffTipIdx].gender]}}，
						{{player.staff[staffTipIdx].age}}岁
					</span>
				</div>
			</div>
		</div>
		<div class="shipTip" id="shipTip" v-show="shipTip">
			<div class="line bottomLine leftVoid"><b>{{playerShip.name}}</b></div>
			<div class="leftVoid">
				<div>武器位：2</div>
				<div>模块位：10个</div>
				<div>护盾回冲：20/天</div>
			</div>
		</div>
		<div class="shipTip" id="wpTip" v-show="wpTip">
			<div class="leftVoid bottomLine bottomad topPad" v-if="wpTipIdx>=0&&playerShip.wp[wpTipIdx-1].id>=0">
				<div ><b>{{playerShip.wp[wpTipIdx-1].name}}</b></div>
				<div v-if="playerShip.wp[wpTipIdx-1].staff==-1">操作员：无<br><i>（该武器处于自动状态）</i></div>
				<span v-if="playerShip.wp[wpTipIdx-1].staff!=-1">操作员：{{player.staff[playerShip.wp[wpTipIdx-1].staff].name}}</span>
			</div>
			<div class="leftVoid bottomLine topPad" v-if="wpTipIdx>=0&&playerShip.wp[wpTipIdx-1].id==-1">
				<div >目前没有装载武器</div>
				<div v-if="playerShip.wp[wpTipIdx-1].staff==-1">操作员：无<br></div>
			</div>
			<div class="leftVoid" v-if="wpTipIdx>=1&&playerShip.wp[wpTipIdx-1].id>=0">
				伤害：{{wpTipDmg}}
				<br>
				速度：{{parseFloat((wpTipSpeed/1000).toFixed(2))}}秒
				<br>
				初次装填时间：{{parseFloat((wpTipIT/1000).toFixed(2))}}秒
				<br>
				命中率：<span :class="wpBetter('aim',wpTipIdx)?'green':'black'">{{wpAim}} </span>%
			</div>
		</div>
		<div class="shipTip" id="mdTip" v-show="mdTip">
			<div class="leftVoid bottomLine bottomad topPad" v-if="mdTipIdx>=1&&playerShip.md[mdTipIdx-1].id>=0">
				<div ><b>{{playerShip.md[mdTipIdx-1].name}}</b></div>
				<i>{{itemDesc(playerShip.md[mdTipIdx-1].id)}}</i>
			</div>
			<div class="leftVoid bottomLine topPad" v-if="mdTipIdx>=0&&playerShip.md[mdTipIdx-1].id==-1">
				<div >这个位置没有安装模块</div>
			</div>
			<div class="leftVoid" v-if="mdTipIdx>=1&&playerShip.md[mdTipIdx-1].id>=0">
				其它描述
			</div>
		</div>
		<div class="shipTip" id="itemTip" v-show="itemTip">
			<div class="leftVoid bottomLine bottomad topPad" v-if="itemTipIdx>=0&&playerShip.room[itemTipIdx]!=undefined&&playerShip.room[itemTipIdx].id!=-1">
				<div ><b>{{itemData[playerShip.room[itemTipIdx].id].name}}</b></div>
				<i>{{itemDesc(playerShip.room[itemTipIdx].id)}}</i>
			</div>
			<div class="leftVoid" v-if="itemTipIdx>=0&&playerShip.room[itemTipIdx]!=undefined&&playerShip.room[itemTipIdx].id!=-1">
				类型：{{itemType(playerShip.room[itemTipIdx].id)}}
			</div>
		</div>
	</div>
</body>
<script src="src/js/info.js"></script>
<script src="src/js/time.js"></script>
<script src="src/js/item.js"></script>
<script src="src/js/starRover.js"></script>
<script src="src/js/captain.js"></script>
<script src="src/js/staff.js"></script>
<script src="src/js/game.js"></script>
<script src="src/js/roverVue.js"></script>
</html>
